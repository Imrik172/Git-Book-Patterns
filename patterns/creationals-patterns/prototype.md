---
layout:
  title:
    visible: true
  description:
    visible: false
  tableOfContents:
    visible: true
  outline:
    visible: true
  pagination:
    visible: true
---

# Прототип

## Назначение

Прототип (Prototype) — это порождающий паттерн проектирования, который позволяет копировать объекты, не вдаваясь в подробности их реализации. Прототип поручает создание копий самим копируемым объектам. Для этого в базовый класс добавляется метод клонироания, который создает новый объект на основе существующего. Паттерн вводит общий интерфейс для всех объектов, поддерживающих клонирование. Это позволяет копировать объекты, не привязываясь к их конкретным классам.

## Решаемые задачи

* Уменьшение сложности создания объектов

Паттерн позволяет создавать новые объекты, используя уже существующие объекты в качестве прототипов. Это позволяет избежать дублирования кода и повторного создания объектов с нуля.

* Клонирование объектов

Появляется возможность создавать копии объектов. Это может быть полезно, когда требуется создать множество похожих объектов, которые отличаются лишь некоторыми параметрами.

* Создание сложных объектов

Паттерн прототип предоставляет альтернативу созданию подклассов для конструирования сложных объектов. Вместо того, чтобы создавать множество подклассов для каждой вариации объекта, мож использовать прототипы и клонирование, чтобы создавать новые объекты с нужными параметрами и состоянием.

## Общая реализация на языке C++

{% tabs %}
{% tab title="BaseObject" %}
```cpp
class BaseObject
{
public:
    virtual ~BaseObject() = default;

    virtual unique_ptr<BaseObject> clone() = 0;
};
```
{% endtab %}

{% tab title="ConcreteObject" %}
```cpp
class ConcreteObject : public BaseObject
{
public:
    ConcreteObject() 
    {
        cout << "Default constructor;" << endl; 
    }
    
    ConcreteObject(const Object1& obj) 
    { 
        cout << "Copy constructor;" << endl; 
    }
    
    ~ConcreteObject() 
    { 
        cout << "Destructor;" << endl; 
    }

    virtual unique_ptr<BaseObject> clone() override
    {
        return make_unique<ConcreteObject>(*this)
    }
};
```
{% endtab %}
{% endtabs %}

```cpp
# include <iostream>
# include <memory>

using namespace std;

int main()
{
    shared_ptr<BaseObject> ptr1 = make_shared<ConcreteObject>();    
    auto ptr2 = ptr1->clone();
}
```

## Преимущества

1. Позволяет создавать новые объекты, используя уже существующие объекты в качестве прототипов, без необходимости знать их классы или подробности создания.
2. Позволяет клонировать объекты.
3. Увеличивает скорость создания объектов.
4. Позволяет уменьшить дублированиекода инициализации объектов.
5. Альтернатива созданию подклассов для конструирования сложных объектов.

## Недостатки

1. Увеличение сложности кода. Особенно при клонировании составных объектов с вложенными объектами и сложной структурой.
2. Необходимо убедиться в правильности работы клонирующего метода и валидности клонируемого объекта.

